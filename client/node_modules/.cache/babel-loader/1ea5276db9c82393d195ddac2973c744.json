{"ast":null,"code":"var _jsxFileName = \"C:\\\\Git\\\\moshe\\\\client\\\\src\\\\components\\\\searchConsole\\\\searchConsole.tsx\";\nimport * as React from 'react';\nimport SearchBox from '../searchBox/searchBox';\nimport SearchResults from './searchResults/searchResults';\nimport axios from 'axios';\n;\nexport default class SearchConsole extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n    this.search = this.search.bind(this);\n  }\n\n  componentDidMount() {\n    if (!axios.defaults.headers.Authorization) {\n      const errorMessage = \"אינכם מחוברים לחשבון.\";\n      this.setState({\n        errorMessage\n      });\n    } else {\n      const queryText = this.props.match.params.queryText;\n      this.setState({\n        items: [],\n        errorMessage: \"\"\n      });\n\n      if (!queryText) {\n        return;\n      }\n\n      this.search(decodeURI(queryText));\n    }\n  }\n\n  async search(queryText) {\n    if (queryText === \"\") {\n      return;\n    }\n\n    this.props.history.push(\"/search/\".concat(queryText, \"?\"));\n    this.setState({\n      isSearching: true,\n      errorMessage: \"\"\n    });\n    const url = \"http://localhost/search?queryText=\".concat(queryText.replace(' ', '+'));\n    axios.get(url).then(response => {\n      this.setState({\n        items: response.data.results,\n        isSearching: false,\n        errorMessage: \"\"\n      });\n    }).catch(() => {\n      const errorMessage = \"חלה שגיאה בחיפוש. נא נסו שנית מאוחר יותר.\";\n      this.setState({\n        items: [],\n        isSearching: false,\n        errorMessage\n      });\n    });\n  }\n\n  render() {\n    const items = this.state ? this.state.items || [] : [];\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }, !this.state.errorMessage && this.state.isSearching ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, \"\\u05DE\\u05D7\\u05E4\\u05E9...\") : \"\", this.state.isSearching === false && this.state.items && this.state.items.length === 0 ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, \"\\u05DC\\u05D0 \\u05E0\\u05DE\\u05E6\\u05D0\\u05D5 \\u05EA\\u05D5\\u05E6\\u05D0\\u05D5\\u05EA.\") : \"\", this.state.errorMessage ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, this.state.errorMessage) : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, React.createElement(SearchBox, {\n      onSearch: this.search,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }), React.createElement(SearchResults, {\n      items: items,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    })));\n  }\n\n}","map":{"version":3,"sources":["C:/Git/moshe/client/src/components/searchConsole/searchConsole.tsx"],"names":["React","SearchBox","SearchResults","axios","SearchConsole","Component","constructor","props","state","search","bind","componentDidMount","defaults","headers","Authorization","errorMessage","setState","queryText","match","params","items","decodeURI","history","push","isSearching","url","replace","get","then","response","data","results","catch","render","length"],"mappings":"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","sourcesContent":["import * as React from 'react';\r\nimport SearchBox from '../searchBox/searchBox';\r\nimport SearchResults from './searchResults/searchResults';\r\nimport axios from 'axios';\r\n\r\ninterface ISearchConsoleState {\r\n    items?: any;\r\n    errorMessage?: string;\r\n    isSearching?: boolean;\r\n};\r\n\r\nexport default class SearchConsole extends React.Component<any, ISearchConsoleState> {\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.state = {};\r\n        this.search = this.search.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (!axios.defaults.headers.Authorization) {\r\n            const errorMessage = \"אינכם מחוברים לחשבון.\";\r\n            this.setState({ errorMessage });\r\n        }\r\n        else {\r\n            const queryText = this.props.match.params.queryText;\r\n            this.setState({ items: [], errorMessage: \"\" });\r\n            if (!queryText) {\r\n                return;\r\n            }\r\n            this.search(decodeURI(queryText));\r\n        }\r\n    }\r\n\r\n    async search(queryText: string) {\r\n        if (queryText === \"\") {\r\n            return;\r\n        }\r\n\r\n        this.props.history.push(`/search/${queryText}?`);\r\n        this.setState({ isSearching: true, errorMessage: \"\" });\r\n        const url = `http://localhost/search?queryText=${queryText.replace(' ', '+')}`;\r\n        axios.get(url).then((response) => {\r\n            this.setState({ items: response.data.results, isSearching: false, errorMessage: \"\" });\r\n        }).catch(() => {\r\n            const errorMessage = \"חלה שגיאה בחיפוש. נא נסו שנית מאוחר יותר.\";\r\n            this.setState({ items: [], isSearching: false, errorMessage });\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const items = this.state ? (this.state.items || []) : [];\r\n        return <div>\r\n\r\n            {!this.state.errorMessage && this.state.isSearching ?\r\n                <div>מחפש...</div> : \"\"\r\n            }\r\n            {this.state.isSearching === false &&\r\n             this.state.items && this.state.items.length === 0 ?\r\n                <div>לא נמצאו תוצאות.</div> : \"\"\r\n            }\r\n            {this.state.errorMessage ? <div>{this.state.errorMessage}</div> :\r\n                <div>\r\n                    <SearchBox onSearch={this.search}></SearchBox>\r\n                    <SearchResults items={items} ></SearchResults>\r\n                </div>}\r\n        </div>;\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}